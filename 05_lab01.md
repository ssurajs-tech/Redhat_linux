<!-- filepath: c:\Users\Suraj\Documents\GitHub\Redhat_linux\lab01.md -->
# Guided Exercise: Loops and Conditional Constructs in Scripts

Learn how to use loops to efficiently print the hostname from multiple servers using shell scripting.

---

## Outcomes

- Create a `for` loop to iterate through a list of items from the command line and in a shell script.
- Automate remote hostname retrieval using `ssh` and `hostname`.
- Store and execute scripts from your personal `bin` directory.

---

## Lab Preparation

Before starting, prepare your environment using the `lab` command:

```bash
lab start console-commands
```

This ensures all required resources are available.

---

## Step 1: Print Hostnames Remotely

Use the `ssh` and `hostname` commands to print the hostname of the `servera` and `serverb` machines:

```bash
ssh student@servera hostname
# Output: servera.lab.example.com

ssh student@serverb hostname
# Output: serverb.lab.example.com
```

---

## Step 2: Use a For Loop on the Command Line

You can use a `for` loop to run the same command for multiple hosts:

```bash
for HOST in servera serverb
do
  ssh student@${HOST} hostname
done
```

**Sample Output:**
```
servera.lab.example.com
serverb.lab.example.com
```

---

## Step 3: Create a Shell Script

1. **Create the `bin` directory if it does not exist:**

    ```bash
    mkdir -p ~/bin
    ```

2. **Verify your `bin` directory is in your `PATH`:**

    ```bash
    echo $PATH
    # Should include /home/student/bin
    ```

3. **Create the script `printhostname.sh` in `~/bin`:**

    ```bash
    vim ~/bin/printhostname.sh
    ```

    Add the following content:

    ```bash
    #!/usr/bin/bash
    # Execute for loop to print server hostnames
    for HOST in servera serverb
    do
      ssh student@${HOST} hostname
    done
    exit 0
    ```

4. **Make the script executable:**

    ```bash
    chmod +x ~/bin/printhostname.sh
    ```

---

## Step 4: Run the Script

From your home directory, run:

```bash
printhostname.sh
```

**Expected Output:**
```
servera.lab.example.com
serverb.lab.example.com
```

Check the exit code to confirm successful execution:

```bash
echo $?
# Output: 0
```

---

## Step 5: Finish the Lab

When done, clean up your environment:

```bash
lab finish console-commands
```

---

## Summary

- You used a `for` loop to automate running commands on multiple servers.
- You created and executed a shell script from your personal `bin` directory.
- You verified script execution and exit codes.

---

**Tip:**  
Storing your scripts in `~/bin` and ensuring it's in your `PATH` allows you to run your custom scripts from anywhere, just like built-in commands.